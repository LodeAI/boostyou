<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>BoostYou.AI Gaming Hub</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
  <style>
    body {
      transition: background 0.3s, color 0.3s;
    }
    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      padding: 1rem;
    }
    #logo {
      font-weight: bold;
      font-size: 1.3rem;
    }
    #filters {
      margin: 1rem 0;
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      align-items: center;
    }
    .card {
      padding: 1rem;
      border-radius: 8px;
      background: var(--card-bg, #f4f4f4);
      margin-bottom: 1rem;
    }
    .card img {
      max-width: 100%;
      border-radius: 6px;
    }
    footer {
      margin-top: 2rem;
      text-align: center;
    }
    .theme-gta6 { --card-bg: #2b2b3d; background: #1a1a24; color: #d2b3ff; }
    .theme-battlefield6 { --card-bg: #344a3f; background: #1c2a24; color: #a8e6a1; }
    .theme-wow { --card-bg: #1a2b4a; background: #0e1624; color: #ffd700; }
    .theme-cod { --card-bg: #2a2a2a; background: #0d0d0d; color: #e0e0e0; }
    .theme-fortnite { --card-bg: #3a1f4d; background: #2b1540; color: #ff66cc; }
  </style>
</head>
<body>
  <header>
    <input type="search" id="search" placeholder="Search news..." />
    <div id="logo">boostyou.ai [LOGO]</div>
    <div>
      <button id="themeToggle">ðŸŒ™</button>
      <button id="subscribeBtn">Subscribe</button>
      <button id="submitNewsBtn">Submit News</button>
    </div>
  </header>

  <section id="filters" class="container">
    <select id="gameFilter">
      <option value="">All Games</option>
    </select>
    <select id="platformFilter">
      <option value="">All Platforms</option>
      <option value="YouTube">YouTube</option>
      <option value="Shorts">YouTube Shorts</option>
      <option value="TikTok">TikTok</option>
      <option value="Instagram">Instagram</option>
      <option value="Reddit">Reddit</option>
      <option value="Article">Article</option>
    </select>
    <select id="timeFilter">
      <option value="">Anytime</option>
      <option value="daily">Last Day</option>
      <option value="weekly">Last Week</option>
      <option value="monthly">Last Month</option>
      <option value="yearly">Last Year</option>
    </select>
  </section>

  <main class="container" id="feed"></main>

  <footer class="container">
    <small>
      <a href="#">About</a> â€¢ 
      <a href="#">Contact</a> â€¢ 
      <a href="#">Privacy</a>
    </small>
  </footer>

  <!-- Submit News Modal -->
  <dialog id="submitNewsModal">
    <article>
      <h3>Submit Gaming News</h3>
      <form id="submitNewsForm">
        <input type="email" id="newsEmail" placeholder="Your Email" required />
        <input type="url" id="newsLink" placeholder="News Link" required />
        <button type="submit">Send</button>
        <button type="button" onclick="submitNewsModal.close()">Cancel</button>
      </form>
    </article>
  </dialog>

  <!-- Subscribe Modal -->
  <dialog id="subscribeModal">
    <article>
      <h3>Subscribe to Newsletter</h3>
      <form id="subscribeForm">
        <input type="text" id="firstname" placeholder="First Name" required />
        <input type="email" id="email" placeholder="Email" required />
        <button type="submit">Subscribe</button>
        <button type="button" onclick="subscribeModal.close()">Cancel</button>
      </form>
    </article>
  </dialog>

  <script>
    const feed = document.getElementById('feed');
    const gameFilter = document.getElementById('gameFilter');
    const platformFilter = document.getElementById('platformFilter');
    const timeFilter = document.getElementById('timeFilter');
    const searchInput = document.getElementById('search');
    let allData = [];
    let visibleData = [];
    let itemsPerLoad = 5;
    let currentIndex = 0;

    // Fetch data
    async function loadData() {
      // For demo, simulate loading from one file. You can extend to loop over /data folder.
      const res = await fetch('/data/gaming.json');
      const data = await res.json();
      allData = data;
      populateGameFilter();
      applyFilters();
    }

    function populateGameFilter() {
      const games = new Set();
      allData.forEach(item => item.game.forEach(g => games.add(g)));
      games.forEach(g => {
        let opt = document.createElement('option');
        opt.value = g;
        opt.textContent = g;
        gameFilter.appendChild(opt);
      });
    }

    function applyFilters() {
      const game = gameFilter.value;
      const platform = platformFilter.value;
      const timeframe = timeFilter.value;
      const search = searchInput.value.toLowerCase();

      visibleData = allData.filter(item => {
        let match = true;
        if (game && !item.game.includes(game)) match = false;
        if (platform && item.platform !== platform) match = false;
        if (search && !item.title.toLowerCase().includes(search)) match = false;
        if (timeframe) {
          const now = new Date();
          const date = new Date(item.date);
          if (timeframe === 'daily' && (now - date) > 86400000) match = false;
          if (timeframe === 'weekly' && (now - date) > 604800000) match = false;
          if (timeframe === 'monthly' && (now - date) > 2592000000) match = false;
          if (timeframe === 'yearly' && (now - date) > 31536000000) match = false;
        }
        return match;
      });

      feed.innerHTML = '';
      currentIndex = 0;
      loadMore();
    }

    function loadMore() {
      const slice = visibleData.slice(currentIndex, currentIndex + itemsPerLoad);
      slice.forEach(item => renderCard(item));
      currentIndex += itemsPerLoad;
    }

    function renderCard(item) {
      const card = document.createElement('div');
      card.className = 'card';
      const unsplashUrl = `https://source.unsplash.com/400x200/?${item.game[0]},gaming`;
      card.innerHTML = `
        <h4>${item.title}</h4>
        <p><strong>${item.game.join(', ')}</strong> â€¢ ${item.platform} â€¢ ${new Date(item.date).toLocaleString()}</p>
        <img src="${unsplashUrl}" alt="${item.game[0]} preview">
        <p><a href="${item.url}" target="_blank">Watch/Read</a></p>
      `;
      feed.appendChild(card);
    }

    // Infinite Scroll
    window.addEventListener('scroll', () => {
      if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 100) {
        loadMore();
      }
    });

    // Filters events
    [gameFilter, platformFilter, timeFilter, searchInput].forEach(el => {
      el.addEventListener('input', applyFilters);
    });

    // Theme toggle
    const themeToggle = document.getElementById('themeToggle');
    themeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark');
      localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
    });

    // Persist theme
    if (localStorage.getItem('theme') === 'dark') {
      document.body.classList.add('dark');
    }

    // Submit news modal
    const submitNewsBtn = document.getElementById('submitNewsBtn');
    const submitNewsModal = document.getElementById('submitNewsModal');
    submitNewsBtn.onclick = () => submitNewsModal.showModal();

    // Subscribe modal
    const subscribeBtn = document.getElementById('subscribeBtn');
    const subscribeModal = document.getElementById('subscribeModal');
    subscribeBtn.onclick = () => subscribeModal.showModal();

    // Start
    loadData();
  </script>
</body>
</html>
